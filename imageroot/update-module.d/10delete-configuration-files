#!/bin/bash

#
# Copyright (C) 2022 Nethesis S.r.l.
# SPDX-License-Identifier: GPL-3.0-or-later
#

# some of the configuration files are generated by the container and are stored in the piler_etc volume
# during the upgrade from 1.4.4 to 1.4.7 they are not generated again so we need to remove them

# test if the systemd service piler is running
if systemctl is-active --user --quiet piler; then
    # remove the configuration files
    podman exec -ti piler-app rm -rf /etc/piler/piler-nginx.conf /etc/piler/piler-nginx.conf.dist
fi
