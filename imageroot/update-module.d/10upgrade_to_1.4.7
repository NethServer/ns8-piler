#!/bin/bash

#
# Copyright (C) 2025 Nethesis S.r.l.
# SPDX-License-Identifier: GPL-3.0-or-later
#

# some of the configuration files are generated by the container and are stored in the piler_etc volume
# during the upgrade from 1.4.4 to 1.4.7 they are not generated again so we need to remove them

# test if the systemd service piler is running
if systemctl is-active --user --quiet piler-app; then
    # remove the configuration files
    podman exec -ti piler-app rm -rf .my.cnf MANTICORE config-site.dist.php config-site.php manticore.conf manticore.conf.dist piler-nginx.conf piler-nginx.conf.dist piler.conf piler.conf.dist sphinx.conf.dist
fi
